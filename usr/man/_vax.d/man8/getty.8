.\" SCCSID: @(#)getty.8	3.1	11/24/87
.TH getty 8 
.SH Name
getty  \- set terminal mode
.SH Syntax
\fB/etc/getty [ \fItype\fB ] [ \fItty\fB ]\fR
.SH Description
.NXR "getty program"
.NXAM "getty program" "gettytab file"
.NXR "terminal" "setting mode"
The 
.PN getty
routine is one of several 
(
.PN init ,
.PN getty ,
.PN login ,
.PN shell
) by which users gain access to the ULTRIX
system from a terminal.
The
.PN getty
routine
initializes a terminal 
line, reads a login name, and invokes
.MS login 1 .
While reading the name, the
.PN getty
routine tries to adapt the system to the speed and type of terminal
on the line specified by the
.PN tty
argument.
.PP
The 
.PN init
command typically invokes
.PN getty ,
as directed by the
.I command
field in the 
.PN /etc/ttys
file.
.PP
The
.PN getty
routine first tries to initialize the line.  It examines
.PN /etc/ttys
and sets up the line for local or remote connections, as
appropriate.  Next, 
the
.PN getty
routine calls
.MS vhangup 2
to revoke access to the terminal by any background processes that
could have 
.PN /dev/tty
open.
The
.PN getty 
routine then opens 
.PN /dev/tty
for reading and writing.
File descriptors 0, 1, and 2 become the standard input, output,
and diagnostic devices.  
If the terminal line is connected to a modem,
the open is
not completed until someone dials up and establishes carrier
on the channel.  
.PP 
If a terminal exists, but an error occurs when trying to
open the terminal, the
.PN getty
routine writes a message to the system console.  The message is repeated
every 10 minutes until the terminal is available, or
the
.PN /etc/ttys
entry for the terminal is modified to indicate that
the terminal is off, and
.MS init 8
is notified by a hangup.
.PP
The
.PN getty
routine checks every minute to see if the terminal is still off.
.PP
Next, the
.PN getty
routine reads a login name, terminated by a newline or carriage-return
character.  For a carriage return, the system is set to treat
carriage returns appropriately.  For further information, see
.MS tty 4 .
.PP
The
.PN getty
routine scans the user's name to see if it contains any lowercase
alphabetic characters.  If it does not, and the name is
nonempty, the system is told to map any future uppercase
characters into the corresponding lowercase characters.
.PP
Finally,
.PN getty
calls
.PN login
with the user's name as an argument.
.PP
Most of the
default actions of
.PN getty
can be changed with a suitable 
.PN gettytab
table.
.PP
The
.PN getty
routine can be set to timeout after some interval with the
\fIto\fR variable in the 
.MS gettytab 5
table.
Thus,
if the user does not enter a login name after a reasonable
amount of time,
.PN getty
hangs up the dialup line.
.SH Arguments
.IP \fItty\fR 
The special device file in 
the 
.PN /dev
directory to open
for the terminal (for example, ttyh0). 
If there is no argument or the argument is "+", the 
terminal line
is assumed to be open as file descriptor 0.
.IP \fItype\fR 
Used to make
.PN getty
treat the line specially.
This argument is used as an index into the
.MS gettytab 5
database, to determine the characteristics of the line.
If there is no argument, or there is no such table, the
default entry in 
.MS gettytab 5
is used.  
If there is no 
.PN /etc/gettytab ,
a set of system defaults is used.
.IP
The
.MS gettytab 5
entry is used to define specific terminal hardware attributes such as the baud
rate and number of bits per character.  Terminals which are setup to transmit
and receive 8-bit characters must specify a gettytab entry which appropriately
sets up the line.  For example a terminal line setup to operate at 9600 baud
with 8-bit characters may use the "8bit.9600" gettytab entry.  If a terminal
is setup to use 8-bit characters, but uses a 7-bit gettytab entry (such
as "std.9600") the output from the getty program may be corrupted.  This 
output corruption appears as multinational characters being generated by
.PN getty
or
.PN login
programs.  When these programs operate in 7-bit mode, 
the high order bit of the character is used as software 
provided parity.  This parity generation
causes conventional ASCII characters to be transformed into multinational
characters.  By using an 8-bit gettytab entry, 
characters will be transmitted
without any software generated parity.

.IP
If indicated by the table located,
.PN getty
will clear the terminal screen,
print a banner heading,
and prompt for a login name.
Usually either the banner or the login prompt will include
the system hostname.
Then the user's name is read, a character at a time.
If a null character is received, it is assumed to be the result
of the user pushing the break (interrupt) key.
The speed is usually then
changed and the ``login:'' prompt is displayed again.
a second break changes the speed again and redisplays the ``login:''
prompt.  Successive break characters cycle through 
some standard set of speeds.
.SH Diagnostics
.NXR "getty program" "diagnostics"
The
.PN getty
uses 
.MS syslog 3
to produce diagnostic messages.  
Therefore,
the syslog configuration file will determine where the messages
are printed.  For further information, see 
.MS syslog 8 . 
.PP
.B "getty: \fItty\fB: cannot open"
.br
A terminal which is turned
on in the 
.PN ttys
file cannot be opened. This is probably because the requisite
lines are either not configured into the system or the associated device
was not attached during boot-time system configuration.
The syslog error logging level is LOG_ERR.
.PP
.B "getty: \fIcommand, tty\fB failing, open blocked"
.br
The
.PN getty
routine tried a non-blocking open of the terminal line and 
the open still blocked.  This can only happen on devices that
have not implemented O_NDELAY.
For further information, see 
.MS open 2 .  
The
.PN getty
routine tries to continue but the line may not be properly 
initialized.
The syslog error logging level is LOG_ERR.
.PP
.B "getty: \fIcommand, tty\fB  open failed, reason"  
.br
The 
.PN getty
routine tried a non-blocking open of the terminal line and 
the open failed.  The \fIreason\fR is the explanation
produced by the 
.MS perror 3
routine for why the open failed.  The
.PN getty
routine tries to continue but the line may not be properly 
initialized.
The syslog error logging level is LOG_ERR.
.PP
.B "getty: in use line \fItty"
.br
The
\fIItty\fR is in use by some other process.  
The
.PN getty
routine will not initialize a line that is already in use.
The
.PN getty
routine will block until the line is no longer in use.
See 
.MS tty 4
and 
.MS open 2
for discussions on shared lines.
The syslog error logging level is LOG_INFO.
.PP
.B "getty could not set pgrp, \fIreason\fB"
.br
The
.PN getty
routine tried and failed 
to initialize the process group of the terminal to process
group 0.  See 
.MS tty 4
for a discussion of process groups.
The \fIreason\fR is the 
explanation produced by 
.MS perror 3 
for the failure.
The syslog error logging level is LOG_INFO.
.SH Files
.TP 15
.PN /etc/gettytab
Data base describing terminal lines
.SH See Also
login(1), tty(4), gettytab(5), ttys(5), init(8), syslog(8)
